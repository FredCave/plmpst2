var Page={winH:$(window).height(),winW:$(window).width(),init:function(){console.log("Page.init"),this.bindEvents(),this.portraitsInit(),this.videoSize()},bindEvents:function(){console.log("Page.bindEvents");var a=this;$(".portrait_wrapper").on("click",function(){a.openVideo($(this).attr("data-link"))}),$("#back_button a").on("click",function(b){b.preventDefault(),a.closeVideo()}),$(window).on("resize",_.throttle(function(){a.winH=$(window).height(),a.winW=$(window).width(),a.videoSize()},250))},portraitsInit:function(){console.log("Page.portraitsInit");var a=this,b=0;$(".portrait_wrapper").each(function(){var c=$(this).find("video").get(0);if(a.winW>768){var d=$(c).find("source").attr("src"),e=d.replace("_small","_large");$(c).find("source").attr("src",e)}c.oncanplay=function(){$(c).parent().fadeIn(1e3),b++,3===b&&a.vimeoVideosInit()}})},vimeoVideosInit:function(){console.log("Page.vimeoVideosInit"),this.player_1=new Vimeo.Player($("#video_1")),this.player_1.setAutopause(!1),this.player_1.pause(),this.player_2=new Vimeo.Player($("#video_2")),this.player_2.setAutopause(!1),this.player_2.pause(),this.player_3=new Vimeo.Player($("#video_3")),this.player_3.setAutopause(!1),this.player_3.pause()},videoSize:function(){console.log("Page.videoSize");var a=this;$("iframe").each(function(){var b=a.winH/a.winW,c=$(this),d=parseInt(c.attr("height"))/parseInt(c.attr("width"));if(console.log(49,b,d),b>d){console.log("Full height");var e=a.winH/d/a.winW*100;c.css({width:e+"%","margin-left":0-(e-100)/2+"%","margin-top":"",height:"100%"})}else{console.log("Full width");var f=a.winW*d/a.winH*100;c.css({width:"100%","margin-left":"","margin-top":0-(a.winW*d-a.winH),height:f+"%"})}})},openVideo:function(a){console.log("Page.openVideo",a),$("#intro_portraits").fadeOut(500);var b=this;"video_1"===a?(this.player_1.play(),this.player_1.on("ended",function(){console.log(117,"Video 1 ended."),b.closeVideo()})):"video_2"===a?(this.player_2.play(),this.player_2.on("ended",function(){console.log(117,"Video 2 ended."),b.closeVideo()})):"video_3"===a&&(this.player_3.play(),this.player_3.on("ended",function(){console.log(117,"Video 3 ended."),b.closeVideo()})),$("#"+a).fadeIn(500),$("#back_button").fadeIn(1e3)},closeVideo:function(){console.log("Page.closeVideo"),$("#back_button").fadeOut(1e3),this.player_1.pause(),this.player_2.pause(),this.player_3.pause(),_.defer(function(){$("#intro_portraits").fadeIn(500,function(){$("#videos iframe").hide()})})}};$(document).on("ready",function(){Page.init()});