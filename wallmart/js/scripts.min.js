THREE.OrbitControls=function(a,b){function c(){return 2*Math.PI/60/60*H.autoRotateSpeed}function d(){return Math.pow(.95,H.zoomSpeed)}function e(a){P.theta-=a}function f(a){P.phi-=a}function g(a){H.object instanceof THREE.PerspectiveCamera?Q/=a:H.object instanceof THREE.OrthographicCamera?(H.object.zoom=Math.max(H.minZoom,Math.min(H.maxZoom,H.object.zoom*a)),H.object.updateProjectionMatrix(),S=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),H.enableZoom=!1)}function h(a){H.object instanceof THREE.PerspectiveCamera?Q*=a:H.object instanceof THREE.OrthographicCamera?(H.object.zoom=Math.max(H.minZoom,Math.min(H.maxZoom,H.object.zoom/a)),H.object.updateProjectionMatrix(),S=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),H.enableZoom=!1)}function i(a){T.set(a.clientX,a.clientY)}function j(a){Z.set(a.clientX,a.clientY)}function k(a){W.set(a.clientX,a.clientY)}function l(a){U.set(a.clientX,a.clientY),V.subVectors(U,T);var b=H.domElement===document?H.domElement.body:H.domElement;e(2*Math.PI*V.x/b.clientWidth*H.rotateSpeed),f(2*Math.PI*V.y/b.clientHeight*H.rotateSpeed),T.copy(U),H.update()}function m(a){$.set(a.clientX,a.clientY),_.subVectors($,Z),_.y>0?g(d()):_.y<0&&h(d()),Z.copy($),H.update()}function n(a){X.set(a.clientX,a.clientY),Y.subVectors(X,W),ca(Y.x,Y.y),W.copy(X),H.update()}function o(a){}function p(a){a.deltaY<0?h(d()):a.deltaY>0&&g(d()),H.update()}function q(a){switch(a.keyCode){case H.keys.UP:ca(0,H.keyPanSpeed),H.update();break;case H.keys.BOTTOM:ca(0,-H.keyPanSpeed),H.update();break;case H.keys.LEFT:ca(H.keyPanSpeed,0),H.update();break;case H.keys.RIGHT:ca(-H.keyPanSpeed,0),H.update()}}function r(a){T.set(a.touches[0].pageX,a.touches[0].pageY)}function s(a){var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,d=Math.sqrt(b*b+c*c);Z.set(0,d)}function t(a){W.set(a.touches[0].pageX,a.touches[0].pageY)}function u(a){U.set(a.touches[0].pageX,a.touches[0].pageY),V.subVectors(U,T);var b=H.domElement===document?H.domElement.body:H.domElement;e(2*Math.PI*V.x/b.clientWidth*H.rotateSpeed),f(2*Math.PI*V.y/b.clientHeight*H.rotateSpeed),T.copy(U),H.update()}function v(a){var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY,e=Math.sqrt(b*b+c*c);$.set(0,e),_.subVectors($,Z),_.y>0?h(d()):_.y<0&&g(d()),Z.copy($),H.update()}function w(a){X.set(a.touches[0].pageX,a.touches[0].pageY),Y.subVectors(X,W),ca(Y.x,Y.y),W.copy(X),H.update()}function x(a){}function y(a){if(console.log(661,"onMouseDown"),H.enabled!==!1){switch(a.preventDefault(),a.button){case H.mouseButtons.ORBIT:if(H.enableRotate===!1)return;i(a),M=L.ROTATE;break;case H.mouseButtons.ZOOM:if(H.enableZoom===!1)return;j(a),M=L.DOLLY;break;case H.mouseButtons.PAN:if(H.enablePan===!1)return;k(a),M=L.PAN}M!==L.NONE&&(document.addEventListener("mousemove",z,!1),document.addEventListener("mouseup",A,!1),H.dispatchEvent(J))}}function z(a){if(H.enabled!==!1)switch(a.preventDefault(),M){case L.ROTATE:if(H.enableRotate===!1)return;l(a);break;case L.DOLLY:if(H.enableZoom===!1)return;m(a);break;case L.PAN:if(H.enablePan===!1)return;n(a)}}function A(a){H.enabled!==!1&&(o(a),document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",A,!1),H.dispatchEvent(K),M=L.NONE)}function B(a){H.enabled===!1||H.enableZoom===!1||M!==L.NONE&&M!==L.ROTATE||(a.preventDefault(),a.stopPropagation(),p(a),H.dispatchEvent(J),H.dispatchEvent(K))}function C(a){H.enabled!==!1&&H.enableKeys!==!1&&H.enablePan!==!1&&q(a)}function D(a){if(H.enabled!==!1){switch(a.touches.length){case 1:if(H.enableRotate===!1)return;r(a),M=L.TOUCH_ROTATE;break;case 2:if(H.enableZoom===!1)return;s(a),M=L.TOUCH_DOLLY;break;case 3:if(H.enablePan===!1)return;t(a),M=L.TOUCH_PAN;break;default:M=L.NONE}M!==L.NONE&&H.dispatchEvent(J)}}function E(a){if(H.enabled!==!1)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:if(H.enableRotate===!1)return;if(M!==L.TOUCH_ROTATE)return;u(a);break;case 2:if(H.enableZoom===!1)return;if(M!==L.TOUCH_DOLLY)return;v(a);break;case 3:if(H.enablePan===!1)return;if(M!==L.TOUCH_PAN)return;w(a);break;default:M=L.NONE}}function F(a){H.enabled!==!1&&(x(a),H.dispatchEvent(K),M=L.NONE)}function G(a){H.enabled!==!1&&a.preventDefault()}this.object=a,this.domElement=void 0!==b?b:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return O.phi},this.getAzimuthalAngle=function(){return O.theta},this.saveState=function(){H.target0.copy(H.target),H.position0.copy(H.object.position),H.zoom0=H.object.zoom},this.reset=function(){H.target.copy(H.target0),H.object.position.copy(H.position0),H.object.zoom=H.zoom0,H.object.updateProjectionMatrix(),H.dispatchEvent(I),H.update(),M=L.NONE},this.update=function(){var b=new THREE.Vector3,d=(new THREE.Quaternion).setFromUnitVectors(a.up,new THREE.Vector3(0,1,0)),f=d.clone().inverse(),g=new THREE.Vector3,h=new THREE.Quaternion;return function(){var a=H.object.position;return b.copy(a).sub(H.target),b.applyQuaternion(d),O.setFromVector3(b),H.autoRotate&&M===L.NONE&&e(c()),O.theta+=P.theta,O.phi+=P.phi,O.theta=Math.max(H.minAzimuthAngle,Math.min(H.maxAzimuthAngle,O.theta)),O.phi=Math.max(H.minPolarAngle,Math.min(H.maxPolarAngle,O.phi)),O.makeSafe(),O.radius*=Q,O.radius=Math.max(H.minDistance,Math.min(H.maxDistance,O.radius)),H.target.add(R),b.setFromSpherical(O),b.applyQuaternion(f),a.copy(H.target).add(b),H.object.lookAt(H.target),H.enableDamping===!0?(P.theta*=1-H.dampingFactor,P.phi*=1-H.dampingFactor):P.set(0,0,0),Q=1,R.set(0,0,0),!!(S||g.distanceToSquared(H.object.position)>N||8*(1-h.dot(H.object.quaternion))>N)&&(H.dispatchEvent(I),g.copy(H.object.position),h.copy(H.object.quaternion),S=!1,!0)}}(),this.dispose=function(){H.domElement.removeEventListener("contextmenu",G,!1),H.domElement.removeEventListener("mousedown",y,!1),H.domElement.removeEventListener("wheel",B,!1),H.domElement.removeEventListener("touchstart",D,!1),H.domElement.removeEventListener("touchend",F,!1),H.domElement.removeEventListener("touchmove",E,!1),document.removeEventListener("mousemove",z,!1),document.removeEventListener("mouseup",A,!1),window.removeEventListener("keydown",C,!1)};var H=this,I={type:"change"},J={type:"start"},K={type:"end"},L={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},M=L.NONE,N=1e-6,O=new THREE.Spherical,P=new THREE.Spherical,Q=1,R=new THREE.Vector3,S=!1,T=new THREE.Vector2,U=new THREE.Vector2,V=new THREE.Vector2,W=new THREE.Vector2,X=new THREE.Vector2,Y=new THREE.Vector2,Z=new THREE.Vector2,$=new THREE.Vector2,_=new THREE.Vector2,aa=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixColumn(c,0),a.multiplyScalar(-b),R.add(a)}}(),ba=function(){var a=new THREE.Vector3;return function(b,c){a.setFromMatrixColumn(c,1),a.multiplyScalar(b),R.add(a)}}(),ca=function(){var a=new THREE.Vector3;return function(b,c){var d=H.domElement===document?H.domElement.body:H.domElement;if(H.object instanceof THREE.PerspectiveCamera){var e=H.object.position;a.copy(e).sub(H.target);var f=a.length();f*=Math.tan(H.object.fov/2*Math.PI/180),aa(2*b*f/d.clientHeight,H.object.matrix),ba(2*c*f/d.clientHeight,H.object.matrix)}else H.object instanceof THREE.OrthographicCamera?(aa(b*(H.object.right-H.object.left)/H.object.zoom/d.clientWidth,H.object.matrix),ba(c*(H.object.top-H.object.bottom)/H.object.zoom/d.clientHeight,H.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),H.enablePan=!1)}}();H.domElement.addEventListener("contextmenu",G,!1),H.domElement.addEventListener("mousedown",y,!1),H.domElement.addEventListener("wheel",B,!1),H.domElement.addEventListener("touchstart",D,!1),H.domElement.addEventListener("touchend",F,!1),H.domElement.addEventListener("touchmove",E,!1),window.addEventListener("keydown",C,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(a){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!a}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(a){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!a}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(a){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!a}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(a){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!a}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(a){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!a}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(a){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=a}}}),THREE.STLLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager},THREE.STLLoader.prototype={constructor:THREE.STLLoader,load:function(a,b,c,d){var e=this,f=new THREE.FileLoader(e.manager);f.setResponseType("arraybuffer"),f.load(a,function(a){b(e.parse(a))},c,d)},parse:function(a){var b=function(){var a,b,d,e;if(e=new DataView(c),b=50,d=e.getUint32(80,!0),a=84+d*b,a===e.byteLength)return!0;for(var f=[115,111,108,105,100],g=0;g<5;g++)if(f[g]!=e.getUint8(g,!1))return!0;return!1},c=this.ensureBinary(a);return b()?this.parseBinary(c):this.parseASCII(this.ensureString(a))},parseBinary:function(a){for(var b,c,d,e,f,g,h,i,j=new DataView(a),k=j.getUint32(80,!0),l=!1,m=0;m<70;m++)1129270351==j.getUint32(m,!1)&&82==j.getUint8(m+4)&&61==j.getUint8(m+5)&&(l=!0,e=[],f=j.getUint8(m+6)/255,g=j.getUint8(m+7)/255,h=j.getUint8(m+8)/255,i=j.getUint8(m+9)/255);for(var n=84,o=50,p=new THREE.BufferGeometry,q=[],r=[],s=0;s<k;s++){var t=n+s*o,u=j.getFloat32(t,!0),v=j.getFloat32(t+4,!0),w=j.getFloat32(t+8,!0);if(l){var x=j.getUint16(t+48,!0);0===(32768&x)?(b=(31&x)/31,c=(x>>5&31)/31,d=(x>>10&31)/31):(b=f,c=g,d=h)}for(var y=1;y<=3;y++){var z=t+12*y;q.push(j.getFloat32(z,!0)),q.push(j.getFloat32(z+4,!0)),q.push(j.getFloat32(z+8,!0)),r.push(u,v,w),l&&e.push(b,c,d)}}return p.addAttribute("position",new THREE.BufferAttribute(new Float32Array(q),3)),p.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(r),3)),l&&(p.addAttribute("color",new THREE.BufferAttribute(new Float32Array(e),3)),p.hasColors=!0,p.alpha=i),p},parseASCII:function(a){var b,c,d,e,f,g;b=new THREE.BufferGeometry,c=/facet([\s\S]*?)endfacet/g;for(var h=[],i=[],j=new THREE.Vector3;null!==(f=c.exec(a));){for(g=f[0],d=/normal[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!==(f=d.exec(g));)j.x=parseFloat(f[1]),j.y=parseFloat(f[3]),j.z=parseFloat(f[5]);for(e=/vertex[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g;null!==(f=e.exec(g));)h.push(parseFloat(f[1]),parseFloat(f[3]),parseFloat(f[5])),i.push(j.x,j.y,j.z)}return b.addAttribute("position",new THREE.BufferAttribute(new Float32Array(h),3)),b.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(i),3)),b},ensureString:function(a){if("string"!=typeof a){var b=new Uint8Array(a);if(void 0!==window.TextDecoder)return(new TextDecoder).decode(b);for(var c="",d=0,e=a.byteLength;d<e;d++)c+=String.fromCharCode(b[d]);return c}return a},ensureBinary:function(a){if("string"==typeof a){for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=255&a.charCodeAt(c);return b.buffer||b}return a}},THREE.TrackballControls=function(a,b){function c(a){m.enabled!==!1&&(window.removeEventListener("keydown",c),r=q,q===n.NONE&&(a.keyCode!==m.keys[n.ROTATE]||m.noRotate?a.keyCode!==m.keys[n.ZOOM]||m.noZoom?a.keyCode!==m.keys[n.PAN]||m.noPan||(q=n.PAN):q=n.ZOOM:q=n.ROTATE))}function d(a){m.enabled!==!1&&(q=r,window.addEventListener("keydown",c,!1))}function e(a){m.enabled!==!1&&(a.preventDefault(),a.stopPropagation(),q===n.NONE&&(q=a.button),q!==n.ROTATE||m.noRotate?q!==n.ZOOM||m.noZoom?q!==n.PAN||m.noPan||(B.copy(G(a.pageX,a.pageY)),C.copy(B)):(x.copy(G(a.pageX,a.pageY)),y.copy(x)):(u.copy(H(a.pageX,a.pageY)),t.copy(u)),document.addEventListener("mousemove",f,!1),document.addEventListener("mouseup",g,!1),m.dispatchEvent(E))}function f(a){m.enabled!==!1&&(a.preventDefault(),a.stopPropagation(),q!==n.ROTATE||m.noRotate?q!==n.ZOOM||m.noZoom?q!==n.PAN||m.noPan||C.copy(G(a.pageX,a.pageY)):y.copy(G(a.pageX,a.pageY)):(t.copy(u),u.copy(H(a.pageX,a.pageY))))}function g(a){m.enabled!==!1&&(a.preventDefault(),a.stopPropagation(),q=n.NONE,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",g),m.dispatchEvent(F))}function h(a){}function i(a){if(m.enabled!==!1){switch(a.touches.length){case 1:q=n.TOUCH_ROTATE,u.copy(H(a.touches[0].pageX,a.touches[0].pageY)),t.copy(u);break;default:q=n.TOUCH_ZOOM_PAN;var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;A=z=Math.sqrt(b*b+c*c);var d=(a.touches[0].pageX+a.touches[1].pageX)/2,e=(a.touches[0].pageY+a.touches[1].pageY)/2;B.copy(G(d,e)),C.copy(B)}m.dispatchEvent(E)}}function j(a){if(m.enabled!==!1)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:t.copy(u),u.copy(H(a.touches[0].pageX,a.touches[0].pageY));break;default:var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;A=Math.sqrt(b*b+c*c);var d=(a.touches[0].pageX+a.touches[1].pageX)/2,e=(a.touches[0].pageY+a.touches[1].pageY)/2;C.copy(G(d,e))}}function k(a){if(m.enabled!==!1){switch(a.touches.length){case 0:q=n.NONE;break;case 1:q=n.TOUCH_ROTATE,u.copy(H(a.touches[0].pageX,a.touches[0].pageY)),t.copy(u)}m.dispatchEvent(F)}}function l(a){m.enabled!==!1&&a.preventDefault()}var m=this,n={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=a,this.domElement=void 0!==b?b:document,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.target=new THREE.Vector3;var o=1e-6,p=new THREE.Vector3,q=n.NONE,r=n.NONE,s=new THREE.Vector3,t=new THREE.Vector2,u=new THREE.Vector2,v=new THREE.Vector3,w=0,x=new THREE.Vector2,y=new THREE.Vector2,z=0,A=0,B=new THREE.Vector2,C=new THREE.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone();var D={type:"change"},E={type:"start"},F={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var a=this.domElement.getBoundingClientRect(),b=this.domElement.ownerDocument.documentElement;this.screen.left=a.left+window.pageXOffset-b.clientLeft,this.screen.top=a.top+window.pageYOffset-b.clientTop,this.screen.width=a.width,this.screen.height=a.height}},this.handleEvent=function(a){"function"==typeof this[a.type]&&this[a.type](a)};var G=function(){var a=new THREE.Vector2;return function(b,c){return a.set((b-m.screen.left)/m.screen.width,(c-m.screen.top)/m.screen.height),a}}(),H=function(){var a=new THREE.Vector2;return function(b,c){return a.set((b-.5*m.screen.width-m.screen.left)/(.5*m.screen.width),(m.screen.height+2*(m.screen.top-c))/m.screen.width),a}}();this.rotateCamera=function(){var a,b=new THREE.Vector3,c=new THREE.Quaternion,d=new THREE.Vector3,e=new THREE.Vector3,f=new THREE.Vector3,g=new THREE.Vector3;return function(){g.set(u.x-t.x,u.y-t.y,0),a=g.length(),a?(s.copy(m.object.position).sub(m.target),d.copy(s).normalize(),e.copy(m.object.up).normalize(),f.crossVectors(e,d).normalize(),e.setLength(u.y-t.y),f.setLength(u.x-t.x),g.copy(e.add(f)),b.crossVectors(g,s).normalize(),a*=m.rotateSpeed,c.setFromAxisAngle(b,a),s.applyQuaternion(c),m.object.up.applyQuaternion(c),v.copy(b),w=a):!m.staticMoving&&w&&(w*=Math.sqrt(1-m.dynamicDampingFactor),s.copy(m.object.position).sub(m.target),c.setFromAxisAngle(v,w),s.applyQuaternion(c),m.object.up.applyQuaternion(c)),t.copy(u)}}(),this.zoomCamera=function(){var a;q===n.TOUCH_ZOOM_PAN?(a=z/A,z=A,s.multiplyScalar(a)):(a=1+(y.y-x.y)*m.zoomSpeed,1!==a&&a>0&&s.multiplyScalar(a),m.staticMoving?x.copy(y):x.y+=(y.y-x.y)*this.dynamicDampingFactor)},this.panCamera=function(){var a=new THREE.Vector2,b=new THREE.Vector3,c=new THREE.Vector3;return function(){a.copy(C).sub(B),a.lengthSq()&&(a.multiplyScalar(s.length()*m.panSpeed),c.copy(s).cross(m.object.up).setLength(a.x),c.add(b.copy(m.object.up).setLength(a.y)),m.object.position.add(c),m.target.add(c),m.staticMoving?B.copy(C):B.add(a.subVectors(C,B).multiplyScalar(m.dynamicDampingFactor)))}}(),this.checkDistances=function(){m.noZoom&&m.noPan||(s.lengthSq()>m.maxDistance*m.maxDistance&&(m.object.position.addVectors(m.target,s.setLength(m.maxDistance)),x.copy(y)),s.lengthSq()<m.minDistance*m.minDistance&&(m.object.position.addVectors(m.target,s.setLength(m.minDistance)),x.copy(y)))},this.update=function(){s.subVectors(m.object.position,m.target),m.noRotate||m.rotateCamera(),m.noZoom||m.zoomCamera(),m.noPan||m.panCamera(),m.object.position.addVectors(m.target,s),m.checkDistances(),m.object.lookAt(m.target),p.distanceToSquared(m.object.position)>o&&(m.dispatchEvent(D),p.copy(m.object.position))},this.reset=function(){q=n.NONE,r=n.NONE,m.target.copy(m.target0),m.object.position.copy(m.position0),m.object.up.copy(m.up0),s.subVectors(m.object.position,m.target),m.object.lookAt(m.target),m.dispatchEvent(D),p.copy(m.object.position)},this.dispose=function(){this.domElement.removeEventListener("contextmenu",l,!1),this.domElement.removeEventListener("mousedown",e,!1),this.domElement.removeEventListener("wheel",h,!1),this.domElement.removeEventListener("touchstart",i,!1),this.domElement.removeEventListener("touchend",k,!1),this.domElement.removeEventListener("touchmove",j,!1),document.removeEventListener("mousemove",f,!1),document.removeEventListener("mouseup",g,!1),window.removeEventListener("keydown",c,!1),window.removeEventListener("keyup",d,!1)},this.domElement.addEventListener("contextmenu",l,!1),this.domElement.addEventListener("mousedown",e,!1),this.domElement.addEventListener("wheel",h,!1),this.domElement.addEventListener("touchstart",i,!1),this.domElement.addEventListener("touchend",k,!1),this.domElement.addEventListener("touchmove",j,!1),window.addEventListener("keydown",c,!1),window.addEventListener("keyup",d,!1),this.handleResize(),this.update()},THREE.TrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.TrackballControls.prototype.constructor=THREE.TrackballControls;var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var a=document.createElement("canvas");return!(!window.WebGLRenderingContext||!a.getContext("webgl")&&!a.getContext("experimental-webgl"))}catch(b){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var a=document.createElement("div");return a.id="webgl-error-message",a.style.fontFamily="monospace",a.style.fontSize="13px",a.style.fontWeight="normal",a.style.textAlign="center",a.style.background="#fff",a.style.color="#000",a.style.padding="1.5em",a.style.width="400px",a.style.margin="5em auto 0",this.webgl||(a.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),a},addGetWebGLMessage:function(a){var b,c,d;a=a||{},b=void 0!==a.parent?a.parent:document.body,c=void 0!==a.id?a.id:"oldie",d=Detector.getWebGLErrorMessage(),d.id=c,b.appendChild(d)}};"object"==typeof module&&(module.exports=Detector),function(a,b,c){"use strict";function d(c){if(e=b.documentElement,f=b.body,T(),ha=this,c=c||{},ma=c.constants||{},c.easing)for(var d in c.easing)W[d]=c.easing[d];ta=c.edgeStrategy||"set",ka={beforerender:c.beforerender,render:c.render,keyframe:c.keyframe},la=c.forceHeight!==!1,la&&(Ka=c.scale||1),na=c.mobileDeceleration||y,pa=c.smoothScrolling!==!1,qa=c.smoothScrollingDuration||A,ra={targetTop:ha.getScrollTop()},Sa=(c.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||a.opera)})(),Sa?(ja=b.getElementById(c.skrollrBody||z),ja&&ga(),X(),Ea(e,[s,v],[t])):Ea(e,[s,u],[t]),ha.refresh(),wa(a,"resize orientationchange",function(){var a=e.clientWidth,b=e.clientHeight;b===Pa&&a===Oa||(Pa=b,Oa=a,Qa=!0)});var g=U();return function h(){$(),va=g(h)}(),ha}var e,f,g={get:function(){return ha},init:function(a){return ha||new d(a)},VERSION:"0.6.30"},h=Object.prototype.hasOwnProperty,i=a.Math,j=a.getComputedStyle,k="touchstart",l="touchmove",m="touchcancel",n="touchend",o="skrollable",p=o+"-before",q=o+"-between",r=o+"-after",s="skrollr",t="no-"+s,u=s+"-desktop",v=s+"-mobile",w="linear",x=1e3,y=.004,z="skrollr-body",A=200,B="start",C="end",D="center",E="bottom",F="___skrollable_id",G=/^(?:input|textarea|button|select)$/i,H=/^\s+|\s+$/g,I=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,J=/\s*(@?[\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,K=/^(@?[a-z\-]+)\[(\w+)\]$/,L=/-([a-z0-9_])/g,M=function(a,b){return b.toUpperCase()},N=/[\-+]?[\d]*\.?[\d]+/g,O=/\{\?\}/g,P=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,Q=/[a-z\-]+-gradient/g,R="",S="",T=function(){var a=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(j){var b=j(f,null);for(var c in b)if(R=c.match(a)||+c==c&&b[c].match(a))break;if(!R)return void(R=S="");R=R[0],"-"===R.slice(0,1)?(S=R,R={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[R]):S="-"+R.toLowerCase()+"-"}},U=function(){var b=a.requestAnimationFrame||a[R.toLowerCase()+"RequestAnimationFrame"],c=Ha();return!Sa&&b||(b=function(b){var d=Ha()-c,e=i.max(0,1e3/60-d);return a.setTimeout(function(){c=Ha(),b()},e)}),b},V=function(){var b=a.cancelAnimationFrame||a[R.toLowerCase()+"CancelAnimationFrame"];return!Sa&&b||(b=function(b){return a.clearTimeout(b)}),b},W={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-i.cos(a*i.PI)/2+.5},sqrt:function(a){return i.sqrt(a)},outCubic:function(a){return i.pow(a-1,3)+1},bounce:function(a){var b;if(a<=.5083)b=3;else if(a<=.8489)b=9;else if(a<=.96208)b=27;else{if(!(a<=.99981))return 1;b=91}return 1-i.abs(3*i.cos(a*b*1.028)/b)}};d.prototype.refresh=function(a){var d,e,f=!1;for(a===c?(f=!0,ia=[],Ra=0,a=b.getElementsByTagName("*")):a.length===c&&(a=[a]),d=0,e=a.length;d<e;d++){var g=a[d],h=g,i=[],j=pa,k=ta,l=!1;if(f&&F in g&&delete g[F],g.attributes){for(var m=0,n=g.attributes.length;m<n;m++){var p=g.attributes[m];if("data-anchor-target"!==p.name)if("data-smooth-scrolling"!==p.name)if("data-edge-strategy"!==p.name)if("data-emit-events"!==p.name){var q=p.name.match(I);if(null!==q){var r={props:p.value,element:g,eventType:p.name.replace(L,M)};i.push(r);var s=q[1];s&&(r.constant=s.substr(1));var t=q[2];/p$/.test(t)?(r.isPercentage=!0,r.offset=(0|t.slice(0,-1))/100):r.offset=0|t;var u=q[3],v=q[4]||u;u&&u!==B&&u!==C?(r.mode="relative",r.anchors=[u,v]):(r.mode="absolute",u===C?r.isEnd=!0:r.isPercentage||(r.offset=r.offset*Ka))}}else l=!0;else k=p.value;else j="off"!==p.value;else if(h=b.querySelector(p.value),null===h)throw'Unable to find anchor target "'+p.value+'"'}if(i.length){var w,x,y;!f&&F in g?(y=g[F],w=ia[y].styleAttr,x=ia[y].classAttr):(y=g[F]=Ra++,w=g.style.cssText,x=Da(g)),ia[y]={element:g,styleAttr:w,classAttr:x,anchorTarget:h,keyFrames:i,smoothScrolling:j,edgeStrategy:k,emitEvents:l,lastFrameIndex:-1},Ea(g,[o],[])}}}for(Aa(),d=0,e=a.length;d<e;d++){var z=ia[a[d][F]];z!==c&&(_(z),ba(z))}return ha},d.prototype.relativeToAbsolute=function(a,b,c){var d=e.clientHeight,f=a.getBoundingClientRect(),g=f.top,h=f.bottom-f.top;return b===E?g-=d:b===D&&(g-=d/2),c===E?g+=h:c===D&&(g+=h/2),g+=ha.getScrollTop(),g+.5|0},d.prototype.animateTo=function(a,b){b=b||{};var d=Ha(),e=ha.getScrollTop(),f=b.duration===c?x:b.duration;return oa={startTop:e,topDiff:a-e,targetTop:a,duration:f,startTime:d,endTime:d+f,easing:W[b.easing||w],done:b.done},oa.topDiff||(oa.done&&oa.done.call(ha,!1),oa=c),ha},d.prototype.stopAnimateTo=function(){oa&&oa.done&&oa.done.call(ha,!0),oa=c},d.prototype.isAnimatingTo=function(){return!!oa},d.prototype.isMobile=function(){return Sa},d.prototype.setScrollTop=function(b,c){return sa=c===!0,Sa?Ta=i.min(i.max(b,0),Ja):a.scrollTo(0,b),ha},d.prototype.getScrollTop=function(){return Sa?Ta:a.pageYOffset||e.scrollTop||f.scrollTop||0},d.prototype.getMaxScrollTop=function(){return Ja},d.prototype.on=function(a,b){return ka[a]=b,ha},d.prototype.off=function(a){return delete ka[a],ha},d.prototype.destroy=function(){var a=V();a(va),ya(),Ea(e,[t],[s,u,v]);for(var b=0,d=ia.length;b<d;b++)fa(ia[b].element);e.style.overflow=f.style.overflow="",e.style.height=f.style.height="",ja&&g.setStyle(ja,"transform","none"),ha=c,ja=c,ka=c,la=c,Ja=0,Ka=1,ma=c,na=c,La="down",Ma=-1,Oa=0,Pa=0,Qa=!1,oa=c,pa=c,qa=c,ra=c,sa=c,Ra=0,ta=c,Sa=!1,Ta=0,ua=c};var X=function(){var d,g,h,j,o,p,q,r,s,t,u,v;wa(e,[k,l,m,n].join(" "),function(a){var e=a.changedTouches[0];for(j=a.target;3===j.nodeType;)j=j.parentNode;switch(o=e.clientY,p=e.clientX,t=a.timeStamp,G.test(j.tagName)||a.preventDefault(),a.type){case k:d&&d.blur(),ha.stopAnimateTo(),d=j,g=q=o,h=p,s=t;break;case l:G.test(j.tagName)&&b.activeElement!==j&&a.preventDefault(),r=o-q,v=t-u,ha.setScrollTop(Ta-r,!0),q=o,u=t;break;default:case m:case n:var f=g-o,w=h-p,x=w*w+f*f;if(x<49){if(!G.test(d.tagName)){d.focus();var y=b.createEvent("MouseEvents");y.initMouseEvent("click",!0,!0,a.view,1,e.screenX,e.screenY,e.clientX,e.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),d.dispatchEvent(y)}return}d=c;var z=r/v;z=i.max(i.min(z,3),-3);var A=i.abs(z/na),B=z*A+.5*na*A*A,C=ha.getScrollTop()-B,D=0;C>Ja?(D=(Ja-C)/B,C=Ja):C<0&&(D=-C/B,C=0),A*=1-D,ha.animateTo(C+.5|0,{easing:"outCubic",duration:A})}}),a.scrollTo(0,0),e.style.overflow=f.style.overflow="hidden"},Y=function(){var a,b,c,d,f,g,h,j,k,l,m,n=e.clientHeight,o=Ba();for(j=0,k=ia.length;j<k;j++)for(a=ia[j],b=a.element,c=a.anchorTarget,d=a.keyFrames,f=0,g=d.length;f<g;f++)h=d[f],l=h.offset,m=o[h.constant]||0,h.frame=l,h.isPercentage&&(l*=n,h.frame=l),"relative"===h.mode&&(fa(b),h.frame=ha.relativeToAbsolute(c,h.anchors[0],h.anchors[1])-l,fa(b,!0)),h.frame+=m,la&&!h.isEnd&&h.frame>Ja&&(Ja=h.frame);for(Ja=i.max(Ja,Ca()),j=0,k=ia.length;j<k;j++){for(a=ia[j],d=a.keyFrames,f=0,g=d.length;f<g;f++)h=d[f],m=o[h.constant]||0,h.isEnd&&(h.frame=Ja-h.offset+m);a.keyFrames.sort(Ia)}},Z=function(a,b){for(var c=0,d=ia.length;c<d;c++){var e,f,i=ia[c],j=i.element,k=i.smoothScrolling?a:b,l=i.keyFrames,m=l.length,n=l[0],s=l[l.length-1],t=k<n.frame,u=k>s.frame,v=t?n:s,w=i.emitEvents,x=i.lastFrameIndex;if(t||u){if(t&&i.edge===-1||u&&1===i.edge)continue;switch(t?(Ea(j,[p],[r,q]),w&&x>-1&&(za(j,n.eventType,La),i.lastFrameIndex=-1)):(Ea(j,[r],[p,q]),w&&x<m&&(za(j,s.eventType,La),i.lastFrameIndex=m)),i.edge=t?-1:1,i.edgeStrategy){case"reset":fa(j);continue;case"ease":k=v.frame;break;default:case"set":var y=v.props;for(e in y)h.call(y,e)&&(f=ea(y[e].value),0===e.indexOf("@")?j.setAttribute(e.substr(1),f):g.setStyle(j,e,f));continue}}else 0!==i.edge&&(Ea(j,[o,q],[p,r]),i.edge=0);for(var z=0;z<m-1;z++)if(k>=l[z].frame&&k<=l[z+1].frame){var A=l[z],B=l[z+1];for(e in A.props)if(h.call(A.props,e)){var C=(k-A.frame)/(B.frame-A.frame);C=A.props[e].easing(C),f=da(A.props[e].value,B.props[e].value,C),f=ea(f),0===e.indexOf("@")?j.setAttribute(e.substr(1),f):g.setStyle(j,e,f)}w&&x!==z&&("down"===La?za(j,A.eventType,La):za(j,B.eventType,La),i.lastFrameIndex=z);break}}},$=function(){Qa&&(Qa=!1,Aa());var a,b,d=ha.getScrollTop(),e=Ha();if(oa)e>=oa.endTime?(d=oa.targetTop,a=oa.done,oa=c):(b=oa.easing((e-oa.startTime)/oa.duration),d=oa.startTop+b*oa.topDiff|0),ha.setScrollTop(d,!0);else if(!sa){var f=ra.targetTop-d;f&&(ra={startTop:Ma,topDiff:d-Ma,targetTop:d,startTime:Na,endTime:Na+qa}),e<=ra.endTime&&(b=W.sqrt((e-ra.startTime)/qa),d=ra.startTop+b*ra.topDiff|0)}if(sa||Ma!==d){La=d>Ma?"down":d<Ma?"up":La,sa=!1;var h={curTop:d,lastTop:Ma,maxTop:Ja,direction:La},i=ka.beforerender&&ka.beforerender.call(ha,h);i!==!1&&(Z(d,ha.getScrollTop()),Sa&&ja&&g.setStyle(ja,"transform","translate(0, "+-Ta+"px) "+ua),Ma=d,ka.render&&ka.render.call(ha,h)),a&&a.call(ha,!1)}Na=e},_=function(a){for(var b=0,c=a.keyFrames.length;b<c;b++){for(var d,e,f,g,h=a.keyFrames[b],i={};null!==(g=J.exec(h.props));)f=g[1],e=g[2],d=f.match(K),null!==d?(f=d[1],d=d[2]):d=w,e=e.indexOf("!")?aa(e):[e.slice(1)],i[f]={value:e,easing:W[d]};h.props=i}},aa=function(a){var b=[];return P.lastIndex=0,a=a.replace(P,function(a){return a.replace(N,function(a){return a/255*100+"%"})}),S&&(Q.lastIndex=0,a=a.replace(Q,function(a){return S+a})),a=a.replace(N,function(a){return b.push(+a),"{?}"}),b.unshift(a),b},ba=function(a){var b,c,d={};for(b=0,c=a.keyFrames.length;b<c;b++)ca(a.keyFrames[b],d);for(d={},b=a.keyFrames.length-1;b>=0;b--)ca(a.keyFrames[b],d)},ca=function(a,b){var c;for(c in b)h.call(a.props,c)||(a.props[c]=b[c]);for(c in a.props)b[c]=a.props[c]},da=function(a,b,c){var d,e=a.length;if(e!==b.length)throw"Can't interpolate between \""+a[0]+'" and "'+b[0]+'"';var f=[a[0]];for(d=1;d<e;d++)f[d]=a[d]+(b[d]-a[d])*c;return f},ea=function(a){var b=1;return O.lastIndex=0,a[0].replace(O,function(){return a[b++]})},fa=function(a,b){a=[].concat(a);for(var c,d,e=0,f=a.length;e<f;e++)d=a[e],c=ia[d[F]],c&&(b?(d.style.cssText=c.dirtyStyleAttr,Ea(d,c.dirtyClassAttr)):(c.dirtyStyleAttr=d.style.cssText,c.dirtyClassAttr=Da(d),d.style.cssText=c.styleAttr,Ea(d,c.classAttr)))},ga=function(){ua="translateZ(0)",g.setStyle(ja,"transform",ua);var a=j(ja),b=a.getPropertyValue("transform"),c=a.getPropertyValue(S+"transform"),d=b&&"none"!==b||c&&"none"!==c;
d||(ua="")};g.setStyle=function(a,b,c){var d=a.style;if(b=b.replace(L,M).replace("-",""),"zIndex"===b)isNaN(c)?d[b]=c:d[b]=""+(0|c);else if("float"===b)d.styleFloat=d.cssFloat=c;else try{R&&(d[R+b.slice(0,1).toUpperCase()+b.slice(1)]=c),d[b]=c}catch(e){}};var ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa=g.addEvent=function(b,c,d){var e=function(b){return b=b||a.event,b.target||(b.target=b.srcElement),b.preventDefault||(b.preventDefault=function(){b.returnValue=!1,b.defaultPrevented=!0}),d.call(this,b)};c=c.split(" ");for(var f,g=0,h=c.length;g<h;g++)f=c[g],b.addEventListener?b.addEventListener(f,d,!1):b.attachEvent("on"+f,e),Ua.push({element:b,name:f,listener:d})},xa=g.removeEvent=function(a,b,c){b=b.split(" ");for(var d=0,e=b.length;d<e;d++)a.removeEventListener?a.removeEventListener(b[d],c,!1):a.detachEvent("on"+b[d],c)},ya=function(){for(var a,b=0,c=Ua.length;b<c;b++)a=Ua[b],xa(a.element,a.name,a.listener);Ua=[]},za=function(a,b,c){ka.keyframe&&ka.keyframe.call(ha,a,b,c)},Aa=function(){var a=ha.getScrollTop();Ja=0,la&&!Sa&&(f.style.height=""),Y(),la&&!Sa&&(f.style.height=Ja+e.clientHeight+"px"),Sa?ha.setScrollTop(i.min(ha.getScrollTop(),Ja)):ha.setScrollTop(a,!0),sa=!0},Ba=function(){var a,b,c=e.clientHeight,d={};for(a in ma)b=ma[a],"function"==typeof b?b=b.call(ha):/p$/.test(b)&&(b=b.slice(0,-1)/100*c),d[a]=b;return d},Ca=function(){var a,b=0;return ja&&(b=i.max(ja.offsetHeight,ja.scrollHeight)),a=i.max(b,f.scrollHeight,f.offsetHeight,e.scrollHeight,e.offsetHeight,e.clientHeight),a-e.clientHeight},Da=function(b){var c="className";return a.SVGElement&&b instanceof a.SVGElement&&(b=b[c],c="baseVal"),b[c]},Ea=function(b,d,e){var f="className";if(a.SVGElement&&b instanceof a.SVGElement&&(b=b[f],f="baseVal"),e===c)return void(b[f]=d);for(var g=b[f],h=0,i=e.length;h<i;h++)g=Ga(g).replace(Ga(e[h])," ");g=Fa(g);for(var j=0,k=d.length;j<k;j++)Ga(g).indexOf(Ga(d[j]))===-1&&(g+=" "+d[j]);b[f]=Fa(g)},Fa=function(a){return a.replace(H,"")},Ga=function(a){return" "+a+" "},Ha=Date.now||function(){return+new Date},Ia=function(a,b){return a.frame-b.frame},Ja=0,Ka=1,La="down",Ma=-1,Na=Ha(),Oa=0,Pa=0,Qa=!1,Ra=0,Sa=!1,Ta=0,Ua=[];"function"==typeof define&&define.amd?define([],function(){return g}):"undefined"!=typeof module&&module.exports?module.exports=g:a.skrollr=g}(window,document);var Objects={init:function(){function a(){e=document.getElementById("canvas");var a=document.getElementById("objects_wrapper"),b=Page.geometries;_.each(Page.filenames,function(c){var d=new THREE.Scene;element=document.createElement("div"),element.className="list-item",element.innerHTML="<div class='scene'></div>",d.userData.element=element.querySelector(".scene"),a.appendChild(element);var e=new THREE.PerspectiveCamera(50,1,1,10);e.position.z=5,d.userData.camera=e;var f=new THREE.TrackballControls(d.userData.camera,d.userData.element);f.minDistance=2,f.maxDistance=5,f.enablePan=!1,f.enableZoom=!1,f.rotateSpeed=10,d.userData.controls=f;var h=new THREE.MeshPhongMaterial({color:15658734,specular:11184810,shininess:0}),i=_.find(b,function(a){return a.name==c}),j=new THREE.Mesh(i,h);j.position.set(0,0,0),j.rotation.set(-Math.PI/2,-Math.PI/12,0),j.scale.set(.05,.05,.05),d.add(j),d.add(new THREE.HemisphereLight(11184810,10066329));var k=new THREE.DirectionalLight(16777215,.5);k.position.set(1,1,1),d.add(k);var l=new THREE.AxisHelper(20);d.add(l),d.name=c;var m=new THREE.Geometry;m.vertices.push(new THREE.Vector3((-10),(-10),0),new THREE.Vector3(10,(-10),0),new THREE.Vector3(10,10,0),new THREE.Vector3((-10),10,0),new THREE.Vector3((-10),(-10),0));var n=new THREE.Line(m,new THREE.LineBasicMaterial({color:16776960}));d.add(n),g.push(d)}),f=new THREE.WebGLRenderer({canvas:e,antialias:!0,alpha:!0}),f.setClearColor(16777215,0),f.setPixelRatio(window.devicePixelRatio)}function b(){var a=e.clientWidth,b=e.clientHeight;a=$("#objects_wrapper").width()+60,b=$("#objects_wrapper").outerHeight()-200,$("#canvas").css({height:b}),e.width===a&&e.height==b||f.setSize(a,b,!1)}function c(){setTimeout(function(){requestAnimationFrame(function(){c()})},1e3),d()}function d(){b();$(window).scrollTop(),$(window).height();f.setClearColor(16777215,0),f.setScissorTest(!1),f.clear(),f.setScissorTest(!0);var a=1;g.forEach(function(b){b.children[0].rotation.z=5e-5*Date.now();var c=b.userData.element,d=c.getBoundingClientRect(),e=d.top+window.scrollY,g=d.bottom+window.scrollY;if(!(g<0||e>f.domElement.clientHeight||d.right<0||d.left>f.domElement.clientWidth)){var h=d.right-d.left,i=g-e,j=d.left-60,k=e;"gate"===b.name,f.setViewport(j,k,h,i),f.setScissor(j,k,h,i);var l=b.userData.camera;b.userData.controls.update(),f.render(b,l),a++}})}console.log("Objects.init"),Detector.webgl||Detector.addGetWebGLMessage();var e,f,g=[];a(),c()},canvasSize:function(){console.log(216,"Objects.canvasSize"),console.log(218,$("#objects_wrapper").height(),$("#canvas").height()),$("#canvas").css({width:$("#objects_wrapper").width(),height:$("#objects_wrapper").height()+$(window).height()})}},Page={filenames:["pillbox","separation_wall","palestinian_village","settlers_house","gate","checkpoint","mezuzah","menorah","keychain","chocolate_mould","pendant","earring"],geometries:[],init:function(){console.log("Page.init"),Info.init(),this.imagesSize(),Info.detectMobile()&&(this.scrollInit(),this.s=skrollr.init({forceHeight:!1})),this.bindEvents(),this.geometryLoader()},bindEvents:function(){console.log("Page.bindEvents");var a=this;$(window).on("resize",_.throttle(function(){a.imagesSize(),Objects.canvasSize()},1e3)),$(window).on("scroll",_.throttle(function(){},500))},imagesSize:function(){console.log("Page.imagesSize");var a=$(window).width()/$(window).height();$("#postcards li").find(".postcard_image").each(function(){var b,c,d=parseFloat($(this).attr("data-ratio"));b=a>d?$(window).width():$(window).height()*d,c=b<=600?$(this).attr("data-mlg"):b>600&&b<=768?$(this).attr("data-lrg"):b>768&&b<=900?$(this).attr("data-xlg"):$(this).attr("data-ulg");var e=$(this).attr("style").split('url("')[1];void 0!==e&&(e=e.split('")')[0]),c!==e&&(console.log("Source changed."),$(this).attr("style",'background-image:url("'+c+'")'))})},scrollInit:function(a){console.log("Page.scrollInit");$(window).height();$("#postcards li").each(function(a){$(this).find(".postcard_image").attr({"data-top-bottom":"top:0px","data-bottom-top":"top:-20%"})})},geometryLoader:function(){console.log("Page.geometryLoader");var a=this;_.each(this.filenames,function(b){var c=new THREE.STLLoader;c.load(TEMPLATE+"/assets/objects/"+b+"_centered.stl",function(c){c.name=b,a.geometries.push(c),"palestinian_village"===b&&_.delay(function(){Objects.init(),a.captionsLoader()},500)})})},captionsLoader:function(){console.log("Page.captionsLoader");var a=this;$("#objects_wrapper .list-item").each(function(b){var c="<div class='caption'>";c+="<img src='"+TEMPLATE+"/assets/img/caption_"+a.filenames[b]+".svg' />",c+="</div>",$(this).append(c),$(this).find(".caption").fadeIn(1e3)})}};$(document).on("ready",function(){Page.init()});